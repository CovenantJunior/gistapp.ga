self.addEventListener('install',event=>{self.skipWaiting();event.waitUntil(caches.open('GistApp').then(function(cache){return cache.addAll(["./","sign-in", "sign-up", "favicon1.png", "manifest.json", "dist/css/lib/bootstrap.min.css", "dist/css/react.css", "dist/css/gist.css", "dist/css/dark.min.css", "dist/css/@media.css", "dist/css/popup.css", "dist/css/animate.css", "emoji_keyboard.css", "emoji_keyboard.js", "cdn.carbonads.com/carbon9add.js", "cdn.jsdelivr.net/npm/fuse.js/dist/fuse.js", "dist/fonts/circular/CircularStd-Bold.woff", "dist/fonts/circular/CircularStd-Black.woff", "dist/fonts/circular/CircularStd-Book.woff", "dist/fonts/circular/CircularStd-Medium.woff", "dist/fonts/material/MaterialIcons-Regular.woff2", "dist/img/avatars/favicon.png", "dist/img/avatars/profile.png", "dist/img/favicon.png", "dist/img/loader.gif", "dist/img/integrations/drive.svg", "emojis.json", "www.jqueryscript.net/css/jquerysctipttop.css", "dist/js/jquery-1.11.3.min.js", "dist/js/jquery-3.3.1.slim.min.js", "dist/js/localstorage.js", "dist/js/conversation.js", "dist/js/update-ALNI_Mb_lf-baCwz5K8mFSv0Pxax86eJgA.php-ALNI_Mb_lf-baCwz5K8mFSv0Pxax86eJgA.js", "dist/js/backtoTop.js", "dist/js/bootstrap.min.js", "dist/js/onunload.js", "dist/js/gist.js", "dist/js/dark.min.js", "dist/js/onload.js", "dist/js/preload.js", "dist/js/drag.js", "dist/js/popup.js", "dist/js/file-upload.js", "dist/js/vendor/popper.min.js", "intl-tel-input-master/build/img/flags.png", "intl-tel-input-master/build/img/flags@2x.png", "intl-tel-input-master/build/css/intlTelInput.css", "intl-tel-input-master/build/css/demo.css", "intl-tel-input-master/build/js/intlTelInput.js", "intl-tel-input-master/build/js/utils.js", "recorder/js/app.js", "recorder/js/recorder.js", "loader.gif", "home", "loading"]); }) ); console.info('Service worker installing...');});self.addEventListener('activate',event=>{console.info('Service worker activating...');});self.addEventListener('fetch', function(event) {event.respondWith(caches.match(event.request).then(function(response) {if (response !== undefined) {return response; } else {return fetch(event.request).then(function (response) {let responseClone = response.clone(); caches.open('GistApp').then(function (cache) {cache.match(event.request, responseClone); }); return response; }).catch(function () {return caches.match('loading'); }); } })); });self.addEventListener('notificationclick', function(e) {var notification = e.notification; var primaryKey = e.notification.data.primaryKey; var bond = e.notification.data.bond; var action = e.action; if (action === 'close') {fetch("notification?read="+bond).catch(function(){var b});}else {notification.close();let url = 'home';e.waitUntil(clients.matchAll({type: 'window'}).then( windowClients => {for (var i = 0; i < windowClients.length; i++) {var client = windowClients[i]; if (client.url === url && 'focus' in client) {return client.focus(); } }if (clients.openWindow) {return clients.openWindow(url); } }) ); };console.log('Opened notification: ' + primaryKey); notification.close(); });self.addEventListener('push', function(e) {var body; if (e.notification) {body = e.notification.text(); image = body.image } else {body = 'Stay tuned'; image = ''; } var options = {body: body, icon: 'favicon.png', image: image, vibrate: [100, 50, 100], sound: true, data: {dateOfArrival: Date.now(), primaryKey: 1, }, actions: [{action: 'explore', title: 'CHECK IT OUT'}, {action: 'close', title: 'MARK AS READ'}, ] }; e.waitUntil(self.registration.showNotification('You might have new messages', options) ); });